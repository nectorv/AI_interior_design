<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Interior Designer</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>

    <div class="app-container">
        <main class="canvas-area">
            
            <div class="canvas-header">
                <div class="logo">
                    <span class="logo-icon">✨</span>
                    <span class="logo-text">AI Interior Design</span>
                </div>
                <div class="canvas-actions">
                    <button class="icon-btn text-btn" id="history-btn"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg> History</button>
                    <button class="icon-btn text-btn" id="share-btn"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"/></svg> Share</button>
                    <div class="user-avatar">
                        <img src="https://ui-avatars.com/api/?name=Jane+Doe&background=random" alt="User">
                    </div>
                </div>
            </div>

            <!-- Static Badges on Left and Right Borders - Outside viewport -->
            <span class="label badge-before-static hidden">Before</span>
            <span class="label badge-after-static hidden">After</span>

            <div class="viewport" id="drop-area">
                
                <input type="file" id="file-input" accept="image/png, image/jpeg" hidden>

                <div id="loading-msg" class="hidden">
                    <div class="spinner"></div>
                    <p id="loading-text">Generating Magic...</p>
                </div>

                <div id="initial-view" class="initial-view">
                    <p>Click or Drag to Upload Room Photo</p>
                </div>

                <div id="result-view" class="comparison-wrapper hidden"> 
                    <div id="comparison-box" class="comparison-box">
                        <img id="final-image" src="" alt="After Design">
                        
                        <div id="overlay" class="overlay-image">
                            <img id="base-image" src="" alt="Before Design">
                        </div>

                        <div id="slider" class="slider-handle">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#333" stroke-width="2"><path d="M7 16V8m10 8V8m-6 8V8"/></svg>
                        </div>
                        
                        <div id="selection-layer" class="hidden">
                            <div id="selection-box"></div>
                        </div>
                    </div>
                    
                    <!-- Custom Instructions Typing Bar - Center Position -->
                    <div id="custom-instructions-bar" class="custom-instructions-bar-center hidden">
                        <div class="instructions-bar-content">
                            <label for="custom-instructions-input" class="instructions-label-center">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
                                </svg>
                                Custom Instructions
                            </label>
                            <div class="instructions-input-wrapper-center">
                                <textarea 
                                    id="custom-instructions-input" 
                                    class="instructions-input-center" 
                                    placeholder="Type your custom design instructions here... (e.g., Add a blue sofa, change the wall color to beige)"
                                    rows="2"
                                ></textarea>
                                <button id="apply-instructions-btn" class="apply-instructions-btn-center" title="Apply custom instructions">
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M22 11.08V12a10 10 0 11-5.93-9.14"/>
                                        <polyline points="22 4 12 14.01 9 11.01"/>
                                    </svg>
                                    Apply
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <button id="upload-btn-trigger" class="floating-btn upload-btn" onclick="document.getElementById('file-input').click()">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"/></svg>
                    Upload New Photo
                </button>

                <div class="floating-tools">
                    <button class="tool-btn" id="undo-btn">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"/></svg>
                    </button>
                    <button class="tool-btn" id="toggle-search-btn" title="Find Furniture">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg>
                    </button>
                    <button class="tool-btn" id="download-btn">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/></svg>
                    </button>
                </div>

            </div>
        </main>

        <aside class="sidebar">
            <div class="sidebar-content">
                
                <div class="control-group">
                    <h3>ROOM TYPE</h3>
                    <div class="chips-grid">
                        <select id="room-type" hidden>
                            <option value="Living Room" selected>Living Room</option>
                            <option value="Bedroom">Bedroom</option>
                            <option value="Kitchen">Kitchen</option>
                            <option value="Bathroom">Bathroom</option>
                            <option value="Dining Room">Dining Room</option>
                            <option value="Office">Office</option>
                        </select>

                        <button class="chip active" data-value="Living Room">Living Room</button>
                        <button class="chip" data-value="Bedroom">Bedroom</button>
                        <button class="chip" data-value="Kitchen">Kitchen</button>
                        <button class="chip" data-value="Bathroom">Bathroom</button>
                        <button class="chip" data-value="Dining Room">Dining Room</button>
                        <button class="chip" data-value="Office">Office</button>
                        <button class="chip" data-value="Outdoor">Outdoor</button>
                    </div>
                </div>

                <div class="control-group">
                    <h3>INTERIOR STYLE</h3>
                    <input type="hidden" id="style-input" value="Modern">
                    
                    <div class="style-grid">
                        <div class="style-card active" data-style="Modern">
                            <img src="{{ url_for('static', filename='assets/modern.jpg') }}" alt="Modern">
                            <div class="style-name">Modern</div>
                            <div class="check-icon">✓</div>
                        </div>
                        <div class="style-card" data-style="Bohemian">
                            <img src="{{ url_for('static', filename='assets/bohemian.jpg') }}" alt="Bohemian">
                            <div class="style-name">Bohemian</div>
                        </div>
                        <div class="style-card" data-style="Coastal">
                            <img src="{{ url_for('static', filename='assets/coastal.jpg') }}" alt="Coastal">
                            <div class="style-name">Coastal</div>
                        </div>
                        <div class="style-card" data-style="Industrial">
                            <img src="{{ url_for('static', filename='assets/industrial.jpg') }}" alt="Industrial">
                            <div class="style-name">Industrial</div>
                        </div>
                        <div class="style-card" data-style="Mid-Century Modern">
                            <img src="{{ url_for('static', filename='assets/mid-century-modern.jpg') }}" alt="Mid Century">
                            <div class="style-name">Mid-Century</div>
                        </div>
                        <div class="style-card" data-style="Nordic">
                            <img src="{{ url_for('static', filename='assets/nordic.jpg') }}" alt="Nordic">
                            <div class="style-name">Nordic</div>
                        </div>
                        <div class="style-card add-new-style" id="add-style-btn">
                            <div class="add-icon">+</div>
                            <div class="style-name">Add Custom</div>
                        </div>
                    </div>
                </div>

                <div class="control-group">
                    <details class="advanced-options">
                        <summary>
                            Advanced Options
                            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 9l-7 7-7-7"/></svg>
                        </summary>
                        <div class="advanced-content">
                            <label for="refine-prompt">Refine Instructions:</label>
                            <div class="input-with-btn">
                                <input type="text" id="refine-prompt" placeholder="e.g., Make the sofa blue...">
                                <button id="refine-button">Refine</button>
                            </div>
                        </div>
                    </details>
                </div>

            </div>

            <div class="sidebar-footer">
                <button id="process-button" class="generate-btn" disabled>
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/></svg>
                    Generate Design
                </button>
                <div class="credit-cost">⚡ 2 credits per generation</div>
            </div>
            
            <div id="search-results-panel" class="search-panel hidden">
                <div class="search-header">
                    <h4>Matching Furniture</h4>
                    <button id="close-results">×</button>
                </div>
                <div id="results-grid" class="search-grid">
                </div>
            </div>

        </aside>
    </div>

    <img id="store-original" class="hidden">

    <script type="module" src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>
